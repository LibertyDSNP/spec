<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style data-href="/styles.2543ff947a193d7f33b1.css" id="gatsby-global-css">@import url(https://fonts.googleapis.com/css?family=Inconsolata&display=swap);@import url(https://fonts.googleapis.com/css?family=Source+Sans+Pro&display=swap);</style><meta name="generator" content="Gatsby 2.32.9"/><title data-rh="true">File Format | Liberty Protocol Spec</title><meta data-rh="true" name="description" content="Detailed documentation regarding the current state of the protocol"/><meta data-rh="true" property="og:title" content="File Format"/><meta data-rh="true" property="og:description" content="Detailed documentation regarding the current state of the protocol"/><meta data-rh="true" property="og:type" content="website"/><meta data-rh="true" name="twitter:card" content="summary"/><meta data-rh="true" name="twitter:title" content="File Format"/><meta data-rh="true" name="twitter:description" content="Detailed documentation regarding the current state of the protocol"/><link as="script" rel="preload" href="/webpack-runtime-245ae256f9ab6a2fc202.js"/><link as="script" rel="preload" href="/framework-7567b41e9974684128c9.js"/><link as="script" rel="preload" href="/styles-c5af7ca4ccb0e55b5cfc.js"/><link as="script" rel="preload" href="/app-762b3dfc4bd0a183caef.js"/><link as="script" rel="preload" href="/bac1b955-b711947e81fae9e9bc2c.js"/><link as="script" rel="preload" href="/b24ebea62f366746afc417e33d0cddf2e88a841e-65d0d366105272f1da29.js"/><link as="script" rel="preload" href="/component---pages-batches-file-format-md-04b416c0df34edb469c3.js"/><link as="fetch" rel="preload" href="/page-data/Batches/FileFormat/page-data.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/sq/d/1635659820.json" crossorigin="anonymous"/><link as="fetch" rel="preload" href="/page-data/app-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><style data-emotion-css="jqemra">.css-jqemra{font-family:Helvetica;font-size:18px;font-weight:400;line-height:1.5;color:var(--theme-ui-colors-text,#2D3747);background-color:var(--theme-ui-colors-background,#FFFFFF);}</style><div class="css-jqemra"><style data-emotion-css="jrjj6h">.css-jrjj6h > div{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><style data-emotion-css="1ubpee3">.css-1ubpee3{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-1ubpee3 > div{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><style data-emotion-css="hbri28">.css-hbri28{box-sizing:border-box;min-width:0;min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;}.css-hbri28 > div{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;}</style><div data-testid="layout" class="css-hbri28"><style data-emotion-css="1xva7m0">body{margin:0;padding:0;}.icon-link{display:none;}.with-overlay{overflow:hidden;}</style><style data-emotion-css="zf0iqh">.css-zf0iqh{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><style data-emotion-css="1tjxv7i">.css-1tjxv7i{-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><style data-emotion-css="238csb">.css-238csb{box-sizing:border-box;min-width:0;-webkit-flex:1 1 auto;-ms-flex:1 1 auto;flex:1 1 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;min-height:100vh;}</style><main class="css-238csb"><style data-emotion-css="15fp3bn">.css-15fp3bn{background-color:var(--theme-ui-colors-header-bg,#424242);position:relative;z-index:1;border-bottom:1px solid var(--theme-ui-colors-border,#CED4DE);}</style><div data-testid="header" class="css-15fp3bn"><style data-emotion-css="zankq9">.css-zankq9{display:none;position:absolute;top:calc(100% + 15px);left:30px;}@media screen and (max-width:57.5em){.css-zankq9{display:block;}}</style><style data-emotion-css="1s0wdqz">.css-1s0wdqz{box-sizing:border-box;min-width:0;display:none;position:absolute;top:calc(100% + 15px);left:30px;}@media screen and (max-width:57.5em){.css-1s0wdqz{display:block;}}</style><div class="css-1s0wdqz"><style data-emotion-css="4019lz">.css-4019lz{padding:0;outline:none;background:transparent;border:none;color:var(--theme-ui-colors-header-text,#2D3747);opacity:0.5;cursor:pointer;}.css-4019lz:hover{cursor:pointer;}</style><button class="css-4019lz"><svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></button></div><style data-emotion-css="z6jak6">.css-z6jak6{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;padding-left:32px;padding-right:32px;position:relative;height:80px;}</style><div class="css-z6jak6"><img src="data:image/png;base64,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" alt="Unfinished Labs" height="55" width="230"/><style data-emotion-css="k008qs">.css-k008qs{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><style data-emotion-css="80zs6q">.css-80zs6q{box-sizing:border-box;min-width:0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}</style><div class="css-80zs6q"><style data-emotion-css="1is33jg">.css-1is33jg{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;outline:none;padding:12px;border:none;border-radius:9999px;background-color:var(--theme-ui-colors-header-button-bg,#0B5FFF);color:var(--theme-ui-colors-header-button-color,#FFFFFF);font-size:12px;font-weight:600;cursor:pointer;}</style><button aria-label="Switch to light mode" class="css-1is33jg"><svg xmlns="http://www.w3.org/2000/svg" width="15" height="15" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line></svg></button></div></div></div><style data-emotion-css="1nfi0ai">.css-1nfi0ai{padding-top:0;padding-bottom:0;-webkit-flex:1;-ms-flex:1;flex:1;display:grid;grid-template-columns:250px minmax(0,1fr);min-height:100vh;}@media screen and (max-width:57.5em){.css-1nfi0ai{display:block;}}</style><div class="css-1nfi0ai"><style data-emotion-css="1tn7q1x">.css-1tn7q1x{z-index:999;position:fixed;top:81px;right:0;bottom:0;left:0;background:rgba(0,0,0,0.6);-webkit-transition:all .2s ease-out;transition:all .2s ease-out;visibility:hidden;opacity:0;}</style><style data-emotion-css="h4snl3">.css-h4snl3{box-sizing:border-box;min-width:0;z-index:999;position:fixed;top:81px;right:0;bottom:0;left:0;background:rgba(0,0,0,0.6);-webkit-transition:all .2s ease-out;transition:all .2s ease-out;visibility:hidden;opacity:0;}</style><div class="css-h4snl3"></div><style data-emotion-css="19z8twf">.css-19z8twf{padding-top:32px;padding-bottom:32px;padding-left:32px;padding-right:32px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:-webkit-sticky;position:sticky;top:0;z-index:1;min-width:0;max-height:100vh;border-right:1px solid var(--theme-ui-colors-border,#CED4DE);overflow:auto;-webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-sidebar-bg,#f7f7f7);}@media screen and (max-width:57.5em){.css-19z8twf{z-index:9999;display:block;position:fixed;top:81px;left:0;bottom:0;width:256px;padding-left:32px;padding-right:32px;background-color:var(--theme-ui-colors-background,#FFFFFF);-webkit-transition:-webkit-transform .2s ease-out;-webkit-transition:transform .2s ease-out;transition:transform .2s ease-out;-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);}}</style><style data-emotion-css="afkoek">.css-afkoek{box-sizing:border-box;min-width:0;padding-top:32px;padding-bottom:32px;padding-left:32px;padding-right:32px;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;position:-webkit-sticky;position:sticky;top:0;z-index:1;min-width:0;max-height:100vh;border-right:1px solid var(--theme-ui-colors-border,#CED4DE);overflow:auto;-webkit-overflow-scrolling:touch;background-color:var(--theme-ui-colors-sidebar-bg,#f7f7f7);}@media screen and (max-width:57.5em){.css-afkoek{z-index:9999;display:block;position:fixed;top:81px;left:0;bottom:0;width:256px;padding-left:32px;padding-right:32px;background-color:var(--theme-ui-colors-background,#FFFFFF);-webkit-transition:-webkit-transform .2s ease-out;-webkit-transition:transform .2s ease-out;transition:transform .2s ease-out;-webkit-transform:translateX(-100%);-ms-transform:translateX(-100%);transform:translateX(-100%);}}</style><div data-testid="sidebar" class="css-afkoek"><style data-emotion-css="lcm9hh">.css-lcm9hh{margin-bottom:16px;display:-webkit-inline-box;display:-webkit-inline-flex;display:-ms-inline-flexbox;display:inline-flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div data-testid="nav-search" class="css-lcm9hh"><style data-emotion-css="1mo6uhh">.css-1mo6uhh{color:var(--theme-ui-colors-border,#CED4DE);margin-right:8px;}</style><svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-1mo6uhh"><circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line></svg><style data-emotion-css="1bbueiu">.css-1bbueiu{outline:none;background:none;border:none;color:var(--theme-ui-colors-text,#2D3747);font-size:14px;}</style><input placeholder="Type to search..." value="" class="css-1bbueiu"/></div><style data-emotion-css="cl0cbf">.css-cl0cbf{margin-top:8px;margin-bottom:8px;display:block;color:var(--theme-ui-colors-sidebar-navGroup,#2D3747);-webkit-text-decoration:none;text-decoration:none;font-size:16px;}.css-cl0cbf.active{color:var(--theme-ui-colors-sidebar-navLinkActive,#21cf80);}</style><a class="css-cl0cbf" href="/">Introduction</a><a class="css-cl0cbf" href="/Implementation_Status">Implementation Status</a><a class="css-cl0cbf" href="/Networks">Networks</a><style data-emotion-css="1ebprri">.css-1ebprri{margin-top:16px;margin-bottom:16px;}</style><div data-testid="nav-group" class="css-1ebprri"><style data-emotion-css="1c8kbwa">.css-1c8kbwa{margin-bottom:4px;font-size:16px;font-weight:500;color:var(--theme-ui-colors-sidebar-navGroup,#2D3747);cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}</style><div class="css-1c8kbwa">Identity<style data-emotion-css="cu2sly">.css-cu2sly{margin-left:4px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-align-self:baseline;-ms-flex-item-align:baseline;align-self:baseline;-webkit-transform:rotateX(0deg);-ms-transform:rotateX(0deg);transform:rotateX(0deg);-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-transition:-webkit-transform .3s ease-in-out;-webkit-transition:transform .3s ease-in-out;transition:transform .3s ease-in-out;}</style><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-cu2sly"><polyline points="6 9 12 15 18 9"></polyline></svg></div><style data-emotion-css="1isemmb">.css-1isemmb{margin-left:8px;}</style><div data-testid="nav-group-links" class="css-1isemmb"></div></div><div data-testid="nav-group" class="css-1ebprri"><div class="css-1c8kbwa">Graph<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-cu2sly"><polyline points="6 9 12 15 18 9"></polyline></svg></div><div data-testid="nav-group-links" class="css-1isemmb"></div></div><div data-testid="nav-group" class="css-1ebprri"><div class="css-1c8kbwa">Messages<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-cu2sly"><polyline points="6 9 12 15 18 9"></polyline></svg></div><div data-testid="nav-group-links" class="css-1isemmb"></div></div><div data-testid="nav-group" class="css-1ebprri"><div class="css-1c8kbwa">Batches<style data-emotion-css="1scp5x8">.css-1scp5x8{margin-left:4px;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;-webkit-align-self:baseline;-ms-flex-item-align:baseline;align-self:baseline;-webkit-transform:rotateX(180deg);-ms-transform:rotateX(180deg);transform:rotateX(180deg);-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;-webkit-transition:-webkit-transform .3s ease-in-out;-webkit-transition:transform .3s ease-in-out;transition:transform .3s ease-in-out;}</style><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-1scp5x8"><polyline points="6 9 12 15 18 9"></polyline></svg></div><div data-testid="nav-group-links" class="css-1isemmb"><a class="css-cl0cbf" href="/Batches/Overview">Overview</a><a aria-current="page" class="css-cl0cbf active" href="/Batches/FileFormat">File Format</a><style data-emotion-css="wpj4i7">.css-wpj4i7{margin-top:8px;margin-bottom:8px;display:block;color:var(--theme-ui-colors-sidebar-tocLink,#67788a);-webkit-text-decoration:none;text-decoration:none;font-size:14px;margin-left:16px;position:relative;}.css-wpj4i7.active{color:var(--theme-ui-colors-sidebar-tocLinkActive,#1D2330);}.css-wpj4i7.active::before{content:"";position:absolute;display:block;top:2px;left:-8px;height:1rem;background-color:var(--theme-ui-colors-primary,#21cf80);-webkit-transition:width 200ms ease 0s;transition:width 200ms ease 0s;width:2px;border-radius:1px;}</style><a class=" css-wpj4i7" href="/Batches/FileFormat#specification-status">Specification Status</a><a class=" css-wpj4i7" href="/Batches/FileFormat#purpose">Purpose</a><a class=" css-wpj4i7" href="/Batches/FileFormat#assumptions">Assumptions</a><a class=" css-wpj4i7" href="/Batches/FileFormat#details">Details</a><a class=" css-wpj4i7" href="/Batches/FileFormat#bloom-filter-row-group-size">Bloom filter, row group size</a><a class=" css-wpj4i7" href="/Batches/FileFormat#api">API</a><a class=" css-wpj4i7" href="/Batches/FileFormat#justifications">Justifications</a><a class="css-cl0cbf" href="/Batches/Queries">Queries</a></div></div><div data-testid="nav-group" class="css-1ebprri"><div class="css-1c8kbwa">Archivists<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-cu2sly"><polyline points="6 9 12 15 18 9"></polyline></svg></div><div data-testid="nav-group-links" class="css-1isemmb"></div></div><div data-testid="nav-group" class="css-1ebprri"><div class="css-1c8kbwa">Activity Streams<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-cu2sly"><polyline points="6 9 12 15 18 9"></polyline></svg></div><div data-testid="nav-group-links" class="css-1isemmb"></div></div><div data-testid="nav-group" class="css-1ebprri"><div class="css-1c8kbwa">Reference<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="css-cu2sly"><polyline points="6 9 12 15 18 9"></polyline></svg></div><div data-testid="nav-group-links" class="css-1isemmb"></div></div><a href="https://github.com/LibertyDSNP/spec/issues?q=label%3Aenhancement" class="css-cl0cbf">Future Proposals</a><a href="https://www.dsnp.org/developer-portal/" class="css-cl0cbf">↩ Developer Portal</a></div><style data-emotion-css="1w3d2mg">.css-1w3d2mg{background-color:var(--theme-ui-colors-background,#FFFFFF);position:relative;max-width:1280px;padding-top:48px;padding-bottom:48px;padding-left:32px;padding-right:32px;padding:32px;}@media screen and (max-width:57.5em){.css-1w3d2mg{padding-top:48px;padding-bottom:32px;padding-left:32px;padding-right:32px;}}</style><style data-emotion-css="kjtkh5">.css-kjtkh5{width:100%;min-width:0;max-width:1280px;margin-left:auto;margin-right:auto;padding:32px;background-color:var(--theme-ui-colors-background,#FFFFFF);position:relative;max-width:1280px;padding-top:48px;padding-bottom:48px;padding-left:32px;padding-right:32px;padding:32px;}@media screen and (max-width:57.5em){.css-kjtkh5{padding-top:48px;padding-bottom:32px;padding-left:32px;padding-right:32px;}}</style><style data-emotion-css="1307vk3">.css-1307vk3{box-sizing:border-box;min-width:0;width:100%;min-width:0;max-width:1280px;margin-left:auto;margin-right:auto;padding:32px;background-color:var(--theme-ui-colors-background,#FFFFFF);position:relative;max-width:1280px;padding-top:48px;padding-bottom:48px;padding-left:32px;padding-right:32px;padding:32px;}@media screen and (max-width:57.5em){.css-1307vk3{padding-top:48px;padding-bottom:32px;padding-left:32px;padding-right:32px;}}</style><div data-testid="main-container" class="css-1307vk3"><style data-emotion-css="15mny46">.css-15mny46{padding:0;margin:0;margin-bottom:16px;font-size:38px;font-family:Helvetica;line-height:1.125;font-weight:700;}</style><h1 id="batch-file-storage" class="css-15mny46">Batch File Storage</h1><style data-emotion-css="1ftn47p">.css-1ftn47p{padding:0;margin:0;margin-bottom:16px;}</style><p class="css-1ftn47p">Batch files are stored and transferred in Apache Parquet format.</p><h2 id="specification-status"><style data-emotion-css="1r0pe6c">.css-1r0pe6c{color:inherit;-webkit-text-decoration:none;text-decoration:none;}.css-1r0pe6c:hover{-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="#specification-status" class="css-1r0pe6c">Specification Status</a></h2><style data-emotion-css="15dbw4o">.css-15dbw4o{padding:0;margin:0;margin-bottom:32px;border-collapse:separate;width:100%;margin-top:32px;border-spacing:0;}.css-15dbw4o th,.css-15dbw4o td{text-align:left;padding-top:4px;padding-bottom:4px;padding-right:4px;padding-left:0;border-color:var(--theme-ui-colors-muted,#f6f6f6);border-bottom-style:solid;}</style><table class="css-15dbw4o"><thead><tr class="css-0"><style data-emotion-css="hafajd">.css-hafajd{text-align:left;border-bottom:1px solid;padding-left:8px;padding-right:8px;padding-top:4px;padding-bottom:4px;vertical-align:bottom;border-bottom-width:2px;}.css-hafajd:first-child{padding-left:0;}.css-hafajd:last-child{padding-right:0;}</style><th class="css-hafajd">Version</th><th class="css-hafajd">Status</th></tr></thead><tbody><tr class="css-0"><style data-emotion-css="11a86gi">.css-11a86gi{text-align:left;border-bottom:1px solid;padding-left:8px;padding-right:8px;padding-top:4px;padding-bottom:4px;margin-top:-1px;vertical-align:top;border-bottom-width:1px;}.css-11a86gi:first-child{padding-left:0;}.css-11a86gi:last-child{padding-right:0;}</style><td class="css-11a86gi">0.1</td><td class="css-11a86gi">Draft</td></tr></tbody></table><h2 id="purpose"><a href="#purpose" class="css-1r0pe6c">Purpose</a></h2><style data-emotion-css="cvh4i0">.css-cvh4i0{padding:0;margin:0;margin-bottom:16px;list-style-position:outside;list-style-image:none;margin-left:16px;}</style><ol class="css-cvh4i0"><style data-emotion-css="q43a5f">.css-q43a5f{margin-bottom:4px;padding-left:0;}.css-q43a5f ol{margin-top:8px;margin-bottom:8px;margin-left:16px;}.css-q43a5f ul{margin-top:8px;margin-bottom:8px;margin-left:16px;}.css-q43a5f p{margin-bottom:8px;}</style><li class="css-q43a5f">Specify the format for storing and transferring Batch files.</li><li class="css-q43a5f">Specify recommended parameters of the Batch files</li><li class="css-q43a5f">Describe reasons for the choice of format.</li></ol><h2 id="assumptions"><a href="#assumptions" class="css-1r0pe6c">Assumptions</a></h2><ul class="css-cvh4i0"><li class="css-q43a5f">All assumptions from <style data-emotion-css="q83kzk">.css-q83kzk{color:var(--theme-ui-colors-primary,#21cf80);-webkit-text-decoration:none;text-decoration:none;}.css-q83kzk:hover{color:var(--theme-ui-colors-secondary,#21cf80);-webkit-text-decoration:underline;text-decoration:underline;}</style><a href="/Messages/Overview" class="css-q83kzk">DSNP Messages</a></li></ul><h2 id="details"><a href="#details" class="css-1r0pe6c">Details</a></h2><p class="css-1ftn47p">Parameters for Batch file storage with Bloom filters are to be chosen with client applications in mind; consumer devices must be able to query, download and sift through downloaded batch files without adversely affecting user experience by way of long download times, heavy processing requirements which may quickly sap battery power, or by using lots of memory.</p><p class="css-1ftn47p">Note this carries implications for row group size as well as configuration of Bloom filters for the batch file.</p><h2 id="bloom-filter-row-group-size"><a href="#bloom-filter-row-group-size" class="css-1r0pe6c">Bloom filter, row group size</a></h2><p class="css-1ftn47p">Optimal settings are still under investigation, however, the maximum row group size allowed in a Parquet file (128<em class="css-0">1024</em>1024 rows) is far too large for a browser or small client application to handle in JavaScript.
We are currently defaulting to 128*1024 rows.  </p><p class="css-1ftn47p">In Parquet, the Bloom filter type is Split Block; the calculation for filter bits is different and nearly a factor of 10 lower than for the normal Bloom filter.
128*1024 rows with a 0.001 false positive rate results in around 29,000 bits for a Split Block Bloom filter.</p><p class="css-1ftn47p">Absent benchmarks, the False Positive Rate currently defaults to 0.001.</p><h2 id="api"><a href="#api" class="css-1r0pe6c">API</a></h2><p class="css-1ftn47p">Batch announcements are done via the SDK API for Announcements.
Bloom filter settings are set as described above in the SDK.
This may be configurable without changing the source code at a later date.</p><h2 id="justifications"><a href="#justifications" class="css-1r0pe6c">Justifications</a></h2><h3 id="requirements"><a href="#requirements" class="css-1r0pe6c">Requirements</a></h3><p class="css-1ftn47p">Batch files need to be quickly and easily searchable.
Minimal storage size and fast, simple querying are preferred to guarantees of no false positives or advanced data manipulation and column relationships.
The files are parseable by client applications, web views or browsers running pure JavaScript without a need to convert the format.</p><p class="css-1ftn47p">Applications need to know if a given Batch file has any information they are interested in without downloading the file first.</p><h3 id="why-parquet"><a href="#why-parquet" class="css-1r0pe6c">Why Parquet?</a></h3><ol class="css-cvh4i0"><li class="css-q43a5f">Parquet is a <style data-emotion-css="1vg6q84">.css-1vg6q84{font-weight:700;}</style><strong class="css-1vg6q84">column-oriented format</strong>. Since DSNP Batch Message data will have a very small column-to-row ratio compared to a typical web application database, it makes sense to prefer a column-oriented format.</li><li class="css-q43a5f">Parquet format <strong class="css-1vg6q84">has been field-tested under extreme network conditions</strong>. It has broad support in cloud storage solutions, with libraries in multiple languages.</li><li class="css-q43a5f"><strong class="css-1vg6q84">Bloom filters are already supported</strong> in the Parquet specification, which allows for fast and accurate searching (with caveats for proper configuration).</li><li class="css-q43a5f"><strong class="css-1vg6q84">Amazon S3 support</strong>: we anticipate that some Batch Announcers, and possibly Archivists, will store Batch files on Amazon S3. Amazon Athena also supports storage in Parquet, and its API supports SQL-like queries.</li><li class="css-q43a5f">Parquet also <strong class="css-1vg6q84">allows references to the same column across files</strong>, which could enable multi-file querying in the future.</li><li class="css-q43a5f">Parquet <strong class="css-1vg6q84">supports compression formats</strong> such as Brötli, which itself is already a browser standard and has a demonstrated improvement in compression speed and file size over older formats.</li><li class="css-q43a5f">Parquet <strong class="css-1vg6q84">files can be transferred directly</strong> to clients, which can parse the files in the app or browser. No conversion to some serialization format is necessary. This eliminates an entire class of bugs as well as making both fetching and querying faster.</li><li class="css-q43a5f">Parquet <strong class="css-1vg6q84">uses schemas</strong>, which additionally reduces file size.</li></ol><h3 id="rejected-alternatives"><a href="#rejected-alternatives" class="css-1r0pe6c">Rejected alternatives</a></h3><ol class="css-cvh4i0"><li class="css-q43a5f">Cassandra, RocksDB, CouchDB, MongoDB, HBASE were rejected since DSNP data needs neither a database for storage nor the overhead of one. Each of these was designed for use cases ranging from somewhat to drastically different to the DSNP network.</li><li class="css-q43a5f">JSON, BSON and SQLite, while used for storage sometimes, are intended for serialization. They are schemaless, which results in redundant information and therefore a larger size than formats with schemas. They also don&#x27;t support Bloom filters; instead indexing would be required, or new batches would need to be downloaded entirely.  The exception is SQLite, which does support more advanced queries, however, it was designed for in-memory storage.</li></ol></div></div></main></div></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/Batches/FileFormat";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-cde6d1e2f610542af393.js"],"app":["/app-762b3dfc4bd0a183caef.js"],"component---pages-activity-streams-overview-md":["/component---pages-activity-streams-overview-md-cf9d0823225f4adf1631.js"],"component---pages-archivists-format-md":["/component---pages-archivists-format-md-12a9f123c39652c4c662.js"],"component---pages-archivists-overview-md":["/component---pages-archivists-overview-md-b38337cc83c94f5ac11d.js"],"component---pages-batches-file-format-md":["/component---pages-batches-file-format-md-04b416c0df34edb469c3.js"],"component---pages-batches-overview-md":["/component---pages-batches-overview-md-572ebb27eaeb00d59410.js"],"component---pages-batches-queries-md":["/component---pages-batches-queries-md-b171affc628bb5f3b8c8.js"],"component---pages-graph-overview-md":["/component---pages-graph-overview-md-c96849a987be6adcf437.js"],"component---pages-identity-factory-md":["/component---pages-identity-factory-md-ae948b5cf8038d279a5c.js"],"component---pages-identity-overview-md":["/component---pages-identity-overview-md-02fb73b08ee8dddc5430.js"],"component---pages-identity-registry-md":["/component---pages-identity-registry-md-beb6ea1cdfaa9fdc4062.js"],"component---pages-implementation-status-md":["/component---pages-implementation-status-md-c38219871e15cba24ae6.js"],"component---pages-index-md":["/component---pages-index-md-9294452078d980fe848b.js"],"component---pages-messages-announce-md":["/component---pages-messages-announce-md-3aa5bfad3314f2b4ee61.js"],"component---pages-messages-identifiers-md":["/component---pages-messages-identifiers-md-216efaf43fa48c8d4d23.js"],"component---pages-messages-ordering-md":["/component---pages-messages-ordering-md-dc2aad717b49499a2dc1.js"],"component---pages-messages-overview-md":["/component---pages-messages-overview-md-7a4afa7b55bd799f20ed.js"],"component---pages-messages-signatures-md":["/component---pages-messages-signatures-md-645d51f16019892147aa.js"],"component---pages-messages-types-md":["/component---pages-messages-types-md-66607b732071a2803499.js"],"component---pages-messages-validation-md":["/component---pages-messages-validation-md-3b13deb2dd7f9db031b2.js"],"component---pages-networks-md":["/component---pages-networks-md-3f160aeb836468b48e69.js"],"component---pages-reference-glossary-md":["/component---pages-reference-glossary-md-d8dbb306d7db7ce33d28.js"],"component---src-pages-404-js":["/component---src-pages-404-js-eb0bbd1ab6cc5c374058.js"]};/*]]>*/</script><script src="/polyfill-cde6d1e2f610542af393.js" nomodule=""></script><script src="/component---pages-batches-file-format-md-04b416c0df34edb469c3.js" async=""></script><script src="/b24ebea62f366746afc417e33d0cddf2e88a841e-65d0d366105272f1da29.js" async=""></script><script src="/bac1b955-b711947e81fae9e9bc2c.js" async=""></script><script src="/app-762b3dfc4bd0a183caef.js" async=""></script><script src="/styles-c5af7ca4ccb0e55b5cfc.js" async=""></script><script src="/framework-7567b41e9974684128c9.js" async=""></script><script src="/webpack-runtime-245ae256f9ab6a2fc202.js" async=""></script></body></html>