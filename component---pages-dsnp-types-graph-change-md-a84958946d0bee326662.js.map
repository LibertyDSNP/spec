{"version":3,"sources":["webpack:///../pages/DSNP/Types/GraphChange.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","isMDXComponent"],"mappings":"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","file":"component---pages-dsnp-types-graph-change-md-a84958946d0bee326662.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/spec/spec/node_modules/gatsby-theme-docz/src/base/Layout.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"graph-change-announcement\"\n    }}>{`Graph Change Announcement`}</h1>\n    <p>{`A Graph Change Announcement is for publishing relationship state changes for a user.`}</p>\n    <h2 {...{\n      \"id\": \"fields\"\n    }}>{`Fields`}</h2>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Field`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Data Type`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Serialization`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Parquet Type`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Bloom Filter`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`announcementType`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Announcement Type Enum (`}<inlineCode parentName=\"td\">{`1`}</inlineCode>{`)`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`enum`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><a parentName=\"td\" {...{\n              \"href\": \"/DSNP/Serializations#decimal\"\n            }}>{`decimal`}</a></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`INT32`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`no`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`changeType`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Type of relationship change`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`enum`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><a parentName=\"td\" {...{\n              \"href\": \"/DSNP/Serializations#decimal\"\n            }}>{`decimal`}</a></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`INT32`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`no`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`createdAt`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`milliseconds since Unix epoch`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`64 bit unsigned integer`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><a parentName=\"td\" {...{\n              \"href\": \"/DSNP/Serializations#decimal\"\n            }}>{`decimal`}</a></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`UINT_64`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`no`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`fromId`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`id of the user creating the relationship`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`64 bit unsigned integer`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><a parentName=\"td\" {...{\n              \"href\": \"/DSNP/Serializations#decimal\"\n            }}>{`decimal`}</a></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`UINT_64`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`YES`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`objectId`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`id of the target of the relationship`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`64 bit unsigned integer`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><a parentName=\"td\" {...{\n              \"href\": \"/DSNP/Serializations#decimal\"\n            }}>{`decimal`}</a></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`UINT_64`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`YES`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`signature`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`creator signature`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`65 bytes`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><a parentName=\"td\" {...{\n              \"href\": \"/DSNP/Serializations#hexadecimal\"\n            }}>{`hexadecimal`}</a></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`BYTE_ARRAY`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`no`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <h2 {...{\n      \"id\": \"field-requirements\"\n    }}>{`Field Requirements`}</h2>\n    <h3 {...{\n      \"id\": \"announcementtype\"\n    }}>{`announcementType`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`MUST be fixed to `}<inlineCode parentName=\"li\">{`1`}</inlineCode></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"changetype\"\n    }}>{`changeType`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`MUST be one of the Change Type Enum`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"change-type-enum\"\n    }}>{`Change Type Enum`}</h3>\n    <p>{`Different change types have different meanings`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Value`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Name`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Description`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`0`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Unfollow`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Remove a Follow relationship`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`1`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Follow`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Create a Follow relationship`}</td>\n        </tr>\n      </tbody>\n    </table>\n    <h3 {...{\n      \"id\": \"createdat\"\n    }}>{`createdAt`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`MUST be set to the milliseconds since Unix epoch at time of signing`}</li>\n      <li parentName=\"ul\">{`MUST be unique for the given `}<inlineCode parentName=\"li\">{`fromId`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`objectId`}</inlineCode>{` pair`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"fromid\"\n    }}>{`fromId`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`MUST be a `}<a parentName=\"li\" {...{\n          \"href\": \"/DSNP/Identifiers#dsnp-user-id\"\n        }}>{`DSNP User Id`}</a></li>\n      <li parentName=\"ul\">{`MUST be the `}<a parentName=\"li\" {...{\n          \"href\": \"/DSNP/Signatures\"\n        }}>{`signer`}</a>{` of the announcement`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"objectid\"\n    }}>{`objectId`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`MUST be a `}<a parentName=\"li\" {...{\n          \"href\": \"/DSNP/Identifiers#dsnp-user-id\"\n        }}>{`DSNP User Id`}</a></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"signature\"\n    }}>{`signature`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`MUST be an `}<a parentName=\"li\" {...{\n          \"href\": \"/DSNP/Signatures\"\n        }}>{`Announcement Signature`}</a>{` over the all fields except the signature field`}</li>\n    </ul>\n    <h2 {...{\n      \"id\": \"non-normative\"\n    }}>{`Non-Normative`}</h2>\n    <h3 {...{\n      \"id\": \"replay-attacks\"\n    }}>{`Replay Attacks`}</h3>\n    <p>{`Clients must ignore any Graph Change event that comes after another event with the same signature.\nThis avoids `}<a parentName=\"p\" {...{\n        \"href\": \"https://en.wikipedia.org/wiki/Replay_attack\"\n      }}>{`Replay attacks`}</a>{`\nEach graph change event has a `}<inlineCode parentName=\"p\">{`createAt`}</inlineCode>{` that allows for differing signatures.\nThe `}<inlineCode parentName=\"p\">{`createAt`}</inlineCode>{` is set to the timestamp is represented as milliseconds since Unix epoch.`}</p>\n    <p>{`For example:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Bob \"follows\" Charlie and then \"unfollows\" him then \"follows\" him again.`}</li>\n    </ol>\n    <ul>\n      <li parentName=\"ul\">{`If the `}<inlineCode parentName=\"li\">{`GraphChange`}</inlineCode>{` event has no timestamp, the second follow event would have to be ignored when reading the graph.\nIt would appear to have the same signature as the first event and therefore be a duplicate, and a potential replay attack.`}</li>\n      <li parentName=\"ul\">{`With a timestamp, the second follow event would have a unique signature and could therefore be interpreted as a valid event.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"graph-retrieval-ordering--reading\"\n    }}>{`Graph Retrieval, Ordering & Reading`}</h3>\n    <p>{`Each graph change event represents a state transition for the graph.\nThe state of the graph at any time is given by taking the state of the graph at a previous time and applying all graph change events not previously applied in the order specified above.\nOnce those graph change events are retrieved, they can be ordered to reflect the current graph state\n(i.e. Charlie has followed Bob then unfollowed him and then followed him again. The graph state reflects that Charlie is Following Bob).`}</p>\n    <p>{`To retrieve the graph, do the following:`}</p>\n    <ol>\n      <li parentName=\"ol\">{`Retrieve the `}<a parentName=\"li\" {...{\n          \"href\": \"/BatchPublication/Publish\"\n        }}><inlineCode parentName=\"a\">{`DSNPBatchPublications`}</inlineCode></a>{` events with `}<a parentName=\"li\" {...{\n          \"href\": \"/DSNP/Announcements#announcement-types\"\n        }}>{`announcementType`}</a>{` matching the enum for \"Graph Change\" from the chain.`}</li>\n      <li parentName=\"ol\">{`Retrieve the batch files from each log event.`}</li>\n      <li parentName=\"ol\">{`Query the batch files for the data for a particular DSNP User Id to retrieve information about the respective graph.`}</li>\n      <li parentName=\"ol\">{`Order the retrieved data by `}<a parentName=\"li\" {...{\n          \"href\": \"/DSNP/Announcements#ordering-announcements\"\n        }}>{`Announcement Ordering`}</a></li>\n    </ol>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}